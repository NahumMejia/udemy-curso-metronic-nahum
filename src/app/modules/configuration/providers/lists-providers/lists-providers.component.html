<div class="card">
    <!--begin::Card header-->
    <div class="card-header border-0 pt-6">
        <!--begin::Card title-->
        <div class="card-title">
            <!--begin::Search-->
            <div class="d-flex align-items-center position-relative my-1">
                <i class="ki-duotone ki-magnifier fs-3 position-absolute ms-5">
                    <span class="path1"></span>
                    <span class="path2"></span>
                </i>
                <input type="text" 
                       [(ngModel)]="search" 
                       (keyup.enter)="listProviders()" 
                       name="search" 
                       class="form-control form-control-solid w-250px ps-12" 
                       placeholder="Buscar Proveedores">
            </div>
            <!--end::Search-->
        </div>
        <!--begin::Card title-->
        
        <span class="spinner-border spinner-border-sm align-middle ms-2" *ngIf="isLoading$ | async"></span>
        
        <!--begin::Card toolbar-->
        <div class="card-toolbar">
            <div class="d-flex justify-content-end">
                <button type="button" class="btn btn-primary" (click)="createProvider()">
                    + Agregar Proveedor
                </button>
            </div>
        </div>
        <!--end::Card toolbar-->
    </div>
    <!--end::Card header-->

    <!--begin::Card body-->
    <div class="card-body pt-0">
        <!--begin::Table-->
        <div class="table-responsive">
            <table class="table align-middle table-row-dashed fs-6 gy-5">
                <thead>
                    <tr class="text-start text-gray-500 fw-bold fs-7 text-uppercase gs-0">
                        <th class="min-w-200px">Proveedor</th>
                        <th class="min-w-125px">RUC</th>
                        <th class="min-w-125px">Teléfono</th>
                        <th class="min-w-200px">Dirección</th>
                        <th class="min-w-100px">Estado</th>
                        <th class="min-w-125px">Fecha de registro</th>
                        <th class="text-end min-w-100px">Acciones</th>
                    </tr>
                </thead>
                <tbody class="fw-semibold text-gray-600">
                    <ng-container *ngFor="let PROVIDER of PROVIDERS">
                        <tr>
                            <td>
                                <div class="d-flex align-items-center">
                                    <!-- Imagen del proveedor -->
                                    <div class="symbol symbol-50px me-5">
                                        <img [src]="PROVIDER.imagen" 
                                             class="rounded" 
                                             alt="{{PROVIDER.full_name}}"
                                             onerror="this.src='https://cdn-icons-png.flaticon.com/512/3135/3135715.png'"
                                             style="width: 50px; height: 50px; object-fit: cover;">
                                    </div>
                                    
                                    <div class="d-flex justify-content-start flex-column">
                                        <a href="#" onclick="return false;" class="text-gray-900 fw-bold text-hover-primary mb-1 fs-6">
                                            {{ PROVIDER.full_name }}
                                        </a>
                                        <span class="text-muted fw-semibold d-block fs-7">
                                            {{ PROVIDER.email }}
                                        </span>
                                    </div>
                                </div>
                            </td>
                            
                            <td>{{ PROVIDER.ruc }}</td>
                            
                            <td>{{ PROVIDER.phone }}</td>
                            
                            <td>
                                <span style="max-width: 250px; display: block; white-space: normal;">
                                    {{ PROVIDER.address }}
                                </span>
                            </td>
                            
                            <td>
                                <span class="badge badge-light-success" *ngIf="PROVIDER.state == 1">Activo</span>
                                <span class="badge badge-light-danger" *ngIf="PROVIDER.state == 0">Inactivo</span>
                            </td>
                            
                            <td>{{ PROVIDER.created_at }}</td>
                            
                            <td class="text-end">
                                <a href="#" onclick="return false;" 
                                   (click)="editProvider(PROVIDER)" 
                                   class="btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1"
                                   title="Editar">
                                    <i class="ki-duotone ki-pencil fs-2">
                                        <span class="path1"></span>
                                        <span class="path2"></span>
                                    </i>
                                </a>

                                <a href="#" onclick="return false;" 
                                   (click)="deleteProvider(PROVIDER)" 
                                   class="btn btn-icon btn-bg-light btn-active-color-danger btn-sm"
                                   title="Eliminar">
                                    <i class="ki-duotone ki-trash fs-2">
                                        <span class="path1"></span>
                                        <span class="path2"></span>
                                        <span class="path3"></span>
                                        <span class="path4"></span>
                                        <span class="path5"></span>
                                    </i>
                                </a>
                            </td>
                        </tr>
                    </ng-container>
                </tbody>
            </table>
        </div>
        <!--end::Table-->
        
        <!--begin::Pagination-->
        <ngb-pagination
            [collectionSize]="totalPages"
            [(page)]="currentPage"
            [pageSize]="25"
            [rotate]="true"
            [boundaryLinks]="true"
            (pageChange)="loadPage($event)">
        </ngb-pagination>
        <!--end::Pagination-->
    </div>
    <!--end::Card body-->
</div>